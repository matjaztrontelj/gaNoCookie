/*
 * Created by Matjaz Trontelj
 * 
 * Copyright (c) 2013 Humane Technologies LLC
 * 
 * Licensed under Attribution-NonCommercial 3.0 Unported, http://creativecommons.org/licenses/by-nc/3.0/
 * 
 * You are free to use this software on non-commercial projects.
 * 
 * Please visit http://humane-tehnologije.si/google-analytics-without-cookies for commercial licensing
 * 
 */
function gaNoCookieCreateCookie(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"}function gaNoCookieReadCookie(e){var t=e+"=";var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null}function gaNoCookieEraseCookie(e){gaNoCookieCreateCookie(e,"",-1)}var gaNoCookieTrunc=function(e,t){if(e.length>t){return e.substring(0,t-1)}return e};var gaNoCookieGetScreenSize=function(){var e=window.devicePixelRatio?window.devicePixelRatio:1;return screen.width*e+"x"+screen.height*e};var gaNoCookieGetViewportSize=function(){if(!document.documentElement||!document.documentElement.clientWidth)return"";return document.documentElement.clientWidth+"x"+document.documentElement.clientHeight};var gaNoCookieGetLanguage=function(){return navigator.language||navigator.userLanguage};var gaNoCookieGetCampaignData=function(){var e;var t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},s=window.location.search.substring(1);e={};while(t=r.exec(s))e[i(t[1])]=i(t[2]);var o="";if(e["utm_campaign"])o+="cn="+encodeURIComponent(e["utm_campaign"])+"&";if(e["utm_source"])o+="cs="+encodeURIComponent(e["utm_source"])+"&";if(e["utm_medium"])o+="cm="+encodeURIComponent(e["utm_medium"])+"&";return o};var gaNoCookieSendHit=function(e,t,n){var r=parseInt(Math.random()*99999999);var i=window.gaNoCookieUid;n=gaNoCookieGetCampaignData()+n;var s="http://www.google-analytics.com/collect?payload_data&v=1&aip=1&z="+r+"&tid="+e+"&cid="+i+"&t="+t+"&sr="+gaNoCookieGetScreenSize()+"&vp="+gaNoCookieGetViewportSize()+"&ul="+gaNoCookieGetLanguage()+"&"+n;var o=document.createElement("img");o.setAttribute("src",s);o.style.position="absolute";o.style.height="0px";document.body.appendChild(o)};var gaNoCookieSendPageView=function(e){var t=encodeURIComponent(window.location.pathname);var n=encodeURIComponent(gaNoCookieTrunc(document.title,100));var r=document.referrer?encodeURIComponent(gaNoCookieTrunc(document.referrer,500)):"";var i="dp="+t+"&dt="+n+"&dr="+r+"&";gaNoCookieSendHit(e,"pageview",i)};var gaNoCookieSendEvent=function(e,t,n,r){if(typeof r=="undefined")r="";t=encodeURIComponent(t);n=encodeURIComponent(n);r=encodeURIComponent(r);var i="ec="+t+"&ea="+n+"&el="+r+"&";gaNoCookieSendHit(e,"event",i)};var gaNoCookieProcessQueue=function(){if(!window["GoogleNoCookieAnalyticsObject"])return;var e=window["GoogleNoCookieAnalyticsObject"];var t=window[e].q;if(!window["gaNoCookieUid"])return;if(!gaNoCookieIsEnabled())return;for(var n=0;n<t.length;n++){var r=t[n];if(r.length==0)continue;var i=r[0];if(i=="create"){if(r.length<2)continue;gaNoCookieTrackerId=r[1]}else if(i=="send"){if(!window["gaNoCookieTrackerId"])continue;if(r.length<2)continue;var s=r[1];if(s=="pageview"){gaNoCookieSendPageView(gaNoCookieTrackerId)}else if(s=="event"){if(r.length<4)continue;var o=r[2];var u=r[3];var a=r.length>4?r[4]:"";gaNoCookieSendEvent(gaNoCookieTrackerId,o,u,a)}}}t.length=0};var gaNoCookieIsEnabled=function(){if(gaNoCookieStatus==""){var e=gaNoCookieReadCookie(gaNoCookieStatusCookie);gaNoCookieStatus=e?0:1}return gaNoCookieStatus};var gaNoCookieDisable=function(){if(window["gaNoCookieTrackerId"]){gaNoCookieSendEvent(window["gaNoCookieTrackerId"],"GA","DISABLED")}gaNoCookieCreateCookie(gaNoCookieStatusCookie,"1",365);gaNoCookieStatus=0;gaNoCookieStatusUI()};var gaNoCookieEnable=function(){gaNoCookieEraseCookie(gaNoCookieStatusCookie);gaNoCookieStatus=1;gaNoCookieStatusUI();if(window["gaNoCookieTrackerId"]){gaNoCookieSendEvent(window["gaNoCookieTrackerId"],"GA","ENABLED")}};var gaNoCookieStatusUI=function(){if(!window["ganc_status_eid"])return;var e=document.getElementById(ganc_status_eid);if(!e)return;var t="";if(gaNoCookieIsEnabled()){t='<a href="#" onclick="gaNoCookieDisable();return false;">'+ganc_status_on+"</a>"}else{t='<a href="#" onclick="gaNoCookieEnable();return false;">'+ganc_status_off+"</a>"}e.innerHTML=t};var gaNoCookieTrackerId=null;var gaNoCookieStatusCookie="gaNoCookieDisabled";var gaNoCookieStatus="";var gaNoCookieGetUidUrl=window["gancGetUidUrl"]?window["gancGetUidUrl"]:"/ga_no_cookie_uid.php";var a=document.createElement("script");var m=document.getElementsByTagName("script")[0];a.async=1;a.src=gaNoCookieGetUidUrl+"?ss="+gaNoCookieGetScreenSize()+"&z="+parseInt(Math.random()*99999999);m.parentNode.insertBefore(a,m);gaNoCookieStatusUI();setInterval(function(){gaNoCookieProcessQueue()},100)